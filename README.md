# Name
 
"アニメ調の目をにじさんじっぽく変換ツール + 編集ツール"

描いたラフな目をにじさんじのライバーたちの目を使ってそれらしくするツールと,   
そのベクタ画像を生成して細かく編集するツールです.
 
# DEMO
 
 https://youtu.be/EvTgpndDvmU
 
# Features
かなり適当に描いてもそれらしくなります.  
ベクタ画像からきれいな輪郭をとれます.  
特定のライバーっぽい雰囲気を出せるように、ディティールの転写機能があります. (現在使用不可)
 
# Requirement
 
* Python 3.10.8
* tk 8.6.12
* pillow 9.2.0
* numpy 1.23.4
* opencv 4.6.0
* pywavelets 1.3.0 現行の機能には使いません.
* matplotlib 3.5.2
 
# Installation

Anacondaをインストールして仮想環境を作ります.
Python 3.10.8をインストールします．
conda installコマンドで上にあげたライブラリをインストールします.
 
# Usage
* calcEigを実行してモデルデータを作ります. 数分ほどかかります.
* eyeProjectorGUI.pyを実行します. guiが開きます.
* clear allボタンを押してキャンバスをクリアします．（最初はテスト用の目の画像が表示されます．）
* modeを0（スライドバーが左）にして, GUI真ん中のキャンバス中央に大きく目をかきます．左クリックで描けます． 
* ペンの太さはthicknessのバーで, 色はカラーボタンから選べます.
* 描き終わったら，右クリックで瞳の中央の位置を指定します．
* 間違えたらclear allでやり直してください.
* 入力ボックスに名前を入れて, 右上のgenerateボタンを押すとそれっぽい目が生成, 表示されます. 画像データはoutputフォルダに保存されます. 
* 生成された目はGUI下に表示されます．左から，近似後のパラメータを編集したもの，パラメータそのままのもの，ridge正則化項を考慮したものです．
* ridge正則化項の係数はridgeAlphaスライドバーで調節できます（０～５）
* 左下のほうのスピンボックスで好きな目を選んで, add detailボタンを押すとディティールが転写された画像ができます. 生成した目の画像の横に表示されます（左：色味だけ転写したもの，右：転写したあともう一度近似を行ったもの）．

* eyeVectorizerGUI.pyを実行します. guiが開きます.
* 左下のeyeColorボタンを押して目に色を付けます．
* 上のtargetという文字の横のスピンボックスで編集対象を選びます. (0: 白目, 1: 黒目, 2: まつ毛)
* Aキーを押して最も近い制御点を選択しマウスで動かしてベクトル画像を編集できます. 
* 左上のsaveボタンは押さないでください．モデル用データが書き換わります．
 
# Note
 
calceig.pyでsavesフォルダに生成されるファイルはファイルサイズが大きいのでコミットするとプッシュできなくなります.  *savesフォルダの中はコミットしないようにしてください*.  
修士論文のための実装です. 
 
# Author
 
* 氏名 岩田草汰
* 所属 北海道大学大学院情報科学院メディアネットワークコース
* E-mail souta314@outlook.jp
 
# License

ライバーの目画像の使用許諾がないのでほかで使うのはだめです.